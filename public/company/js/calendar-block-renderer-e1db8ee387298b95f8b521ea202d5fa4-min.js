YUI.add("squarespace-calendar-block-renderer",function(c){c.namespace("Y.Squarespace.Rendering");c.namespace("Squarespace.Rendering").renderCalendar=function(q,d,a){if(!c.Lang.isString(d))if(c.Object.hasKey(d,"collectionId"))if(null!==d.collectionId)d=d.collectionId;else{q.empty().setHTML('<div class="sqs-state-message">You must select a collection to display.</div>');return}else if(c.instanceOf(d,c.Squarespace.Models.ContentCollection))d=d.get("id");else if(c.Squarespace.Utils.isDamaskEnabled())d=
CONFIG_PANEL.getPreviewFrameCollection().get("id");else{console.warn("Cannot render calendar: failed to determine collectionId");return}q={contentBox:q,date:new Date,collectionId:d};c.Lang.isValue(a)&&c.merge(q,{pageCollectionId:a});a=new c.Squarespace.SquarespaceCalendar(q);a.plug(c.Squarespace.SquarespaceCalendarRenderer);a.render();return a};c.config.win.Squarespace.onInitialize(c,function(){var q=c.all(".sqs-block.calendar-block[data-block-json]");q.size()&&q.each(function(d){c.Squarespace.Rendering.renderCalendar(d.one(".sqs-block-content"),
c.JSON.parse(d.getAttribute("data-block-json")))},this)})},"1.0",{requires:["squarespace-calendar-core-renderer"]});
YUI.add("squarespace-calendar-core-renderer",function(c){var q=function(a){return a.recordType===c.Squarespace.RecordType.EVENT?a.structuredContent.startDate:a.addedOn};c.Squarespace.SquarespaceCalendar=c.Base.create("SquarespaceCalendar",c.Calendar,[],{initializer:function(){this._fetchEvents()},bindUI:function(){c.Calendar.superclass.bindUI.call(this);this.before("dateChange",this._clearEvents,this);this.after("dateChange",this._fetchEvents,this);this.after("collectionIdChange",this._fetchEvents,
this)},_clearEvents:function(){this.set("events",[])},_fetchEvents:function(){var a=this.get("date"),a=c.DataType.Date.format(a,{format:"%B-%Y",locale:"en"});c.Data.get({url:this._getFetchUrl(a),success:this._parseResponse,failure:this._handleResponseError},this)},_parseResponse:function(a){this.set("events",a)},_handleResponseError:function(a){console.error("Failed fetch data: "+a);new c.Squarespace.Widgets.Alert({"strings.title":"Server Request Failed","strings.message":"Failed to get calender data, "+
a.message})},_getFetchUrl:function(a){var m=this.get("collectionId"),e=this.get("pageCollectionId");a="/api/open/GetItemsByMonth?collectionId="+m+"&month="+a;c.Lang.isValue(e)&&(a+="&pageCollectionId="+e);return a}},{ATTRS:{events:{value:[],validator:c.Lang.isArray},collectionId:{value:null,validator:c.Lang.isString},pageCollectionId:{value:null,validator:c.Lang.isString}}});c.Squarespace.CalendarBaseRenderer=c.Base.create("CalendarBaseRenderer",c.Plugin.Base,[],{initializer:function(a){this.host=
a.host;this.afterHostEvent("eventsChange",this._onEventsChange,this)},_onEventsChange:function(a){var m=null;c.Lang.isArray(a.newVal)&&0<a.newVal.length&&(m=c.bind(this._calendarFilterFunction,this));this.host.set("customRenderer",{rules:{all:"events"},filterFunction:m})},_calendarFilterFunction:function(a,c,e){e=this.host.get("events");e=this._getEventsOfDay(e,a);this._sortEvents(e);this._renderDay(a,c,e)},_renderDay:function(a,c,e){0<e.length&&c.setStyle("background","gray")},_sortEvents:function(a){a.sort(function(a,
c){var d=q(a);return q(c)-d})},_getEventsOfDay:function(a,m){var e=c.DataType.Date.format(m,{format:"%Y-%m-%d"});return c.Lang.isArray(a)&&0<a.length?c.Array.filter(a,function(a){return this._isEventPartOfDay(a,e)},this):[]},_isEventPartOfDay:function(a,m){var e,d;d=a.structuredContent;if(a.recordType!==c.Squarespace.RecordType.EVENT)return e=c.Squarespace.DateUtils.dateFormat(a.addedOn,{format:"%Y-%m-%d"}),e===m;e=c.Squarespace.DateUtils.dateFormat(d.startDate,{format:"%Y-%m-%d"});d=c.Squarespace.DateUtils.dateFormat(d.endDate,
{format:"%Y-%m-%d"});return m==e||m==d||new Date(m)>new Date(e)&&new Date(m)<new Date(d)?!0:!1},_getEventDisplayTime:function(a){a=q(a);return c.Squarespace.DateUtils.dateFormat(a,{format:"%l:%M%P"}).trim()},_isSameDay:function(a,m){if(a.recordType!==c.Squarespace.RecordType.EVENT)return!0;var e=c.Squarespace.DateUtils.dateFormat(a.structuredContent.startDate,{format:"%Y-%m-%d"}),d=c.DataType.Date.format(m,{format:"%Y-%m-%d"});return e===d}},{NS:"calendarPlugin"});var d=c.namespace("Squarespace").SquarespaceCalendarRenderer=
c.Base.create("squarespaceCalendarRenderer",c.Squarespace.CalendarBaseRenderer,[],{initializer:function(a){this._loadingSpinner=new c.Squarespace.Spinner({color:"dark",size:"extra-large",render:this.host.get("contentBox")});this.onceAfterHostEvent("eventsChange",this._renderCalendar);this._bindUI()},destructor:function(){this._resizeEvent.detach()},_bindUI:function(){this._resizeEvent=c.on("resize",this._syncUI,c.config.win,this)},_syncUI:function(){this.host.get("contentBox").getDOMNode()&&(this._fitToContainer(),
this._setupCells(),this.host.get("contentBox").hasClass(d.COMPACT_LAYOUT_CLASS)||this._loadImages(),this._setFlyoutHeights())},_onEventsChange:function(a){a=c.bind(this._calendarFilterFunction,this);this.host.set("customRenderer",{rules:{all:{all:{all:{0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"}}}},filterFunction:a});this.get("isRendered")&&this._syncUI()},_calendarFilterFunction:function(a,c,e){d.superclass._calendarFilterFunction.apply(this,arguments);0<=
e.indexOf("sunday")?c.addClass("sunday"):0<=e.indexOf("monday")?c.addClass("monday"):0<=e.indexOf("friday")?c.addClass("friday"):0<=e.indexOf("saturday")&&c.addClass("saturday")},_fitToContainer:function(){var a=this.host.get("contentBox");a.toggleClass(d.SMALL_LAYOUT_CLASS,770>=a.get("offsetWidth"));a.toggleClass(d.COMPACT_LAYOUT_CLASS,600>=a.get("offsetWidth"));a.toggleClass(d.TINY_LAYOUT_CLASS,300>=a.get("offsetWidth"))},_setupHeader:function(){this.host.get("contentBox").one(".yui3-calendar-header-label").wrap("<h1></h1>")},
_setupCells:function(){var a=this.host.get("contentBox").one("table");a.setStyle("width",null);this.cellSpacing=parseInt(a.getComputedStyle("borderSpacing"),10);var c=7*parseInt((a.get("offsetWidth")-8*this.cellSpacing)/7,10)+8*this.cellSpacing;a.setStyle("width",c);a.all("td").setStyles({width:parseInt(c/7,10)-this.cellSpacing,height:parseInt(c/7,10)-this.cellSpacing})},_loadImages:function(){this.host.get("contentBox").all("img[data-src]").each(function(a){ImageLoader.load(a,{mode:"fill",load:!0})},
this)},_setFlyoutHeights:function(){this.host.get("contentBox").all(".flyoutitemlist--hasmorecontent").each(function(a){var c=a.ancestor("tr"),e=this._getRowHeight(c),c=a.ancestor("tr:nth-child(4)")||a.ancestor("tr:nth-child(5)")||a.ancestor("tr:nth-child(6)")?this._getRowHeight(c.previous("tr")):this._getRowHeight(c.next("tr"));a.setStyle("height",e+c+this.cellSpacing)},this);this.host.get("contentBox").all("tr").removeAttribute("data-row-height")},_getRowHeight:function(a){if(a.getAttribute("data-row-height"))return parseInt(a.getAttribute("data-row-height"),
10);var c=a.get("offsetHeight");a.setAttribute("data-row-height",c);return c},_renderCalendar:function(){this._setupHeader();this._syncUI();this._loadingSpinner&&this._loadingSpinner.destroy(!0);this.host.get("boundingBox").addClass("loaded");this.set("isRendered",!0)},_renderDay:function(a,c,e){this.setAttrs({date:a,node:c,events:this._groupEvents(e,a)});this._highlightToday();this._highlightDaysWithEvents();a=this._getTemplateInfo().template(this._getHBTemplateContext());c.empty().append(a)},_highlightToday:function(){var a=
new Date,a=new Date(a.setMinutes(a.getMinutes()+c.Squarespace.DateUtils.getTimeOffsetToWebsiteTimezone(a)));this.get("date").setHours(0,0,0,0)===a.setHours(0,0,0,0)&&this.get("node").addClass(d.TODAY_CLASS)},_highlightDaysWithEvents:function(){0<this.get("events").length&&this.get("node").addClass(d.HAS_EVENT_CLASS)},_getTemplateInfo:function(){return{template:c.Squarespace.UITemplates.getCompiledTemplate(d.HANDLEBARS_TEMPLATE)}},_getHBTemplateContext:function(){return{date:this.get("date"),events:this.get("events")}},
_groupEvents:function(a,d){var e=[],v=[];c.Array.each(a,function(a){this._isSameDay(a,d)?e.unshift(a):(a.isSubsequentDayOfMultidayEvent=!0,v.unshift(a));this._isMultidayEvent(a)&&(a.isMultiday=!0)},this);return v.concat(e)},_isMultidayEvent:function(a){if(a.recordType===c.Squarespace.RecordType.EVENT){var d=a.structuredContent;a=c.Squarespace.DateUtils.dateFormat(d.startDate,{format:"%d%m%Y"});d=c.Squarespace.DateUtils.dateFormat(d.endDate,{format:"%d%m%Y"});return a!==d}}},{NS:"calendarPlugin",TODAY_CLASS:"today",
HAS_EVENT_CLASS:"has-event",SMALL_LAYOUT_CLASS:"small-layout",COMPACT_LAYOUT_CLASS:"compact-layout",TINY_LAYOUT_CLASS:"tiny-layout",HANDLEBARS_TEMPLATE:"calendar-day.html"});c.Handlebars.registerHelper("day-of-month-format",function(a,d){return c.DataType.Date.format(a,{format:d.hash.format||"%B %e, %Y"})});c.Handlebars.registerHelper("date-format",function(a,d){return c.Squarespace.DateUtils.dateFormat(a,{format:d.hash.format||"%B %e, %Y"})});c.Handlebars.registerHelper("calendar-compact-time-format",
function(a){var d="PM"==c.Squarespace.DateUtils.dateFormat(a,{format:"%p"})?"p":"a";return 0===(new Date(a)).getMinutes()?c.Squarespace.DateUtils.dateFormat(a,{format:"%l"})+d:c.Squarespace.DateUtils.dateFormat(a,{format:"%l:%M"})+d})},"1.0",{requires:"calendar node squarespace-attr-validators squarespace-calendar-day-template squarespace-date-utils squarespace-ui-base squarespace-spinner squarespace-widgets-alert".split(" ")});
YUI.add("calendar",function(c,q){function d(){d.superclass.constructor.apply(this,arguments)}var a=c.ClassNameManager.getClassName,m=a("calendar","day-selected"),e=a("calendar","day-highlighted"),v=a("calendar","day"),D=a("calendar","prevmonth-day"),z=a("calendar","nextmonth-day"),t=a("calendar","grid"),n=c.DataType.Date,h=a("calendar","pane"),A=c.UA.os;c.Calendar=c.extend(d,c.CalendarBase,{_keyEvents:[],_highlightedDateNode:null,_lastSelectedDate:null,initializer:function(){this.plug(c.Plugin.CalendarNavigator);
this._keyEvents=[];this._lastSelectedDate=this._highlightedDateNode=null},_bindCalendarEvents:function(){var a=this.get("contentBox").one("."+h);a.on("selectstart",this._preventSelectionStart);a.delegate("click",this._clickCalendar,"."+v+", ."+D+", ."+z,this);a.delegate("keydown",this._keydownCalendar,"."+t,this);a.delegate("focus",this._focusCalendarGrid,"."+t,this);a.delegate("focus",this._focusCalendarCell,"."+v,this);a.delegate("blur",this._blurCalendarGrid,"."+t+",."+v,this);this.after(["minimumDateChange",
"maximumDateChange"],this._afterCustomRendererChange)},_preventSelectionStart:function(a){a.preventDefault()},_highlightDateNode:function(a){this._unhighlightCurrentDateNode();a=this._dateToNode(a);a.focus();a.addClass(e)},_unhighlightCurrentDateNode:function(){var a=this.get("contentBox").all("."+e);a&&a.removeClass(e)},_getGridNumber:function(a){a=a.get("id").split("_").reverse();return parseInt(a[0],10)},_blurCalendarGrid:function(){this._unhighlightCurrentDateNode()},_focusCalendarCell:function(a){this._highlightedDateNode=
a.target;a.stopPropagation()},_focusCalendarGrid:function(){this._unhighlightCurrentDateNode();this._highlightedDateNode=null},_keydownCalendar:function(a){var c=this._getGridNumber(a.target),e=!this._highlightedDateNode?null:this._nodeToDate(this._highlightedDateNode),d=a.keyCode,h=0,s;switch(d){case 40:h=7;break;case 38:h=-7;break;case 37:h=-1;break;case 39:h=1;break;case 32:case 13:if(a.preventDefault(),this._highlightedDateNode)if(s=this.get("selectionMode"),"single"===s&&!this._highlightedDateNode.hasClass(m))this._clearSelection(!0),
this._addDateToSelection(e);else if("multiple"===s||"multiple-sticky"===s)this._highlightedDateNode.hasClass(m)?this._removeDateFromSelection(e):this._addDateToSelection(e)}if(40===d||38===d||37===d||39===d)e||(e=n.addMonths(this.get("date"),c),h=0),a.preventDefault(),a=n.addDays(e,h),c=this.get("date"),e=n.addMonths(this.get("date"),this._paneNumber-1),d=new Date(e),e.setDate(n.daysInMonth(e)),n.isInRange(a,c,e)?this._highlightDateNode(a):n.isGreater(c,a)?n.isGreaterOrEqual(this.get("minimumDate"),
c)||(this.set("date",n.addMonths(c,-1)),this._highlightDateNode(a)):n.isGreater(a,e)&&!n.isGreaterOrEqual(d,this.get("maximumDate"))&&(this.set("date",n.addMonths(c,1)),this._highlightDateNode(a))},_clickCalendar:function(a){var c=a.currentTarget,e=c.hasClass(v)&&!c.hasClass(D)&&!c.hasClass(z),d=c.hasClass(m);switch(this.get("selectionMode")){case "single":e&&!d&&(this._clearSelection(!0),this._addDateToSelection(this._nodeToDate(c)));break;case "multiple-sticky":e&&(d?this._removeDateFromSelection(this._nodeToDate(c)):
this._addDateToSelection(this._nodeToDate(c)));break;case "multiple":e&&(!a.metaKey&&!a.ctrlKey&&!a.shiftKey?(this._clearSelection(!0),this._lastSelectedDate=this._nodeToDate(c),this._addDateToSelection(this._lastSelectedDate)):("macintosh"===A&&a.metaKey||"macintosh"!==A&&a.ctrlKey)&&!a.shiftKey?d?(this._removeDateFromSelection(this._nodeToDate(c)),this._lastSelectedDate=null):(this._lastSelectedDate=this._nodeToDate(c),this._addDateToSelection(this._lastSelectedDate)):("macintosh"===A&&a.metaKey||
"macintosh"!==A&&a.ctrlKey)&&a.shiftKey?this._lastSelectedDate?(a=this._nodeToDate(c),this._addDateRangeToSelection(a,this._lastSelectedDate),this._lastSelectedDate=a):(this._lastSelectedDate=this._nodeToDate(c),this._addDateToSelection(this._lastSelectedDate)):a.shiftKey&&(this._lastSelectedDate?(a=this._nodeToDate(c),this._clearSelection(!0),this._addDateRangeToSelection(a,this._lastSelectedDate),this._lastSelectedDate=a):(this._clearSelection(!0),this._lastSelectedDate=this._nodeToDate(c),this._addDateToSelection(this._lastSelectedDate))))}e?
this.fire("dateClick",{cell:c,date:this._nodeToDate(c)}):c.hasClass(D)?this.fire("prevMonthClick"):c.hasClass(z)&&this.fire("nextMonthClick")},_canBeSelected:function(a){var c=this.get("minimumDate"),e=this.get("maximumDate");return c&&!n.isGreaterOrEqual(a,c)||e&&n.isGreater(a,e)?!1:d.superclass._canBeSelected.call(this,a)},_renderCustomRules:function(){d.superclass._renderCustomRules.call(this);var a=this.get("minimumDate"),c=this.get("maximumDate"),e=[],h,m;if(a||c){for(m=0;m<this._paneNumber;m++)h=
n.addMonths(this.get("date"),m),e=e.concat(n.listOfDatesInMonth(h));if(a){h=0;for(m=e.length;h<m&&!n.isGreaterOrEqual(e[h],a);h++)this._disableDate(e[h])}if(c)for(h=e.length-1;0<=h;h--)if(n.isGreater(e[h],c))this._disableDate(e[h]);else break}},subtractMonth:function(a){this.set("date",n.addMonths(this.get("date"),-1));a&&a.halt();return this},subtractYear:function(a){this.set("date",n.addYears(this.get("date"),-1));a&&a.halt();return this},addMonth:function(a){this.set("date",n.addMonths(this.get("date"),
1));a&&a.halt();return this},addYear:function(a){this.set("date",n.addYears(this.get("date"),1));a&&a.halt();return this}},{NAME:"calendar",ATTRS:{selectionMode:{value:"single"},date:{value:new Date,lazyAdd:!1,setter:function(a){a=this._normalizeDate(a);var c=n.addMonths(a,this._paneNumber-1),e=this.get("minimumDate"),d=this.get("maximumDate");if((!e||n.isGreaterOrEqual(a,e))&&(!d||n.isGreaterOrEqual(d,c)))return a;if(e&&n.isGreater(e,a))return this._normalizeDate(e);if(d&&n.isGreater(c,d))return n.addMonths(this._normalizeDate(d),
1-this._paneNumber)}},minimumDate:{value:null,setter:function(a){if(c.Lang.isDate(a)){var e=this.get("date"),d=this._normalizeTime(a);e&&!n.isGreaterOrEqual(e,d)&&this.set("date",a);return d}return null}},maximumDate:{value:null,setter:function(a){if(c.Lang.isDate(a)){var e=this.get("date");e&&!n.isGreaterOrEqual(a,n.addMonths(e,this._paneNumber-1))&&this.set("date",n.addMonths(this._normalizeDate(a),1-this._paneNumber));return this._normalizeTime(a)}return null}}}})},"3.17.2",{requires:["calendar-base",
"calendarnavigator"],skinnable:!0});
YUI.add("calendar-base",function(c,q){function d(){d.superclass.constructor.apply(this,arguments)}var a=c.ClassNameManager.getClassName,m=a("calendar","grid"),e=a("calendar","left-grid"),v=a("calendar","right-grid"),D=a("calendar","body"),z=a("calendar","header"),t=a("calendar","header-label"),n=a("calendar","weekdayrow"),h=a("calendar","weekday"),A=a("calendar","column-hidden"),E=a("calendar","day-selected"),I=a("calendar","selection-disabled"),K=a("calendar","row"),w=a("calendar","day"),L=a("calendar",
"prevmonth-day"),s=a("calendar","nextmonth-day"),M=a("calendar","anchor"),N=a("calendar","pane"),a=a("calendar","status"),B=c.Lang,y=B.sub,F=c.Array.each,G=c.Object.each,H=c.Array.indexOf,C=c.Object.hasKey,O=c.Object.setValue,J=c.Object.isEmpty,u=c.DataType.Date;c.CalendarBase=c.extend(d,c.Widget,{_paneProperties:{},_paneNumber:1,_calendarId:null,_selectedDates:{},_rules:{},_filterFunction:null,_storedDateCells:{},initializer:function(){this._paneProperties={};this._calendarId=c.guid("calendar");
this._selectedDates={};J(this._rules)&&(this._rules={});this._storedDateCells={}},renderUI:function(){this.get("contentBox").appendChild(this._initCalendarHTML(this.get("date")));this.get("showPrevMonth")&&this._afterShowPrevMonthChange();this.get("showNextMonth")&&this._afterShowNextMonthChange();this._renderCustomRules();this._renderSelectedDates();this.get("boundingBox").setAttribute("aria-labelledby",this._calendarId+"_header")},bindUI:function(){this.after("dateChange",this._afterDateChange);
this.after("showPrevMonthChange",this._afterShowPrevMonthChange);this.after("showNextMonthChange",this._afterShowNextMonthChange);this.after("headerRendererChange",this._afterHeaderRendererChange);this.after("customRendererChange",this._afterCustomRendererChange);this.after("enabledDatesRuleChange",this._afterCustomRendererChange);this.after("disabledDatesRuleChange",this._afterCustomRendererChange);this.after("focusedChange",this._afterFocusedChange);this.after("selectionChange",this._renderSelectedDates);
this._bindCalendarEvents()},_getSelectedDatesList:function(){var a=[];G(this._selectedDates,function(c){G(c,function(c){G(c,function(c){a.push(c)},this)},this)},this);return a},_getSelectedDatesInMonth:function(a){var e=a.getFullYear();a=a.getMonth();return C(this._selectedDates,e)&&C(this._selectedDates[e],a)?c.Object.values(this._selectedDates[e][a]):[]},_isNumInList:function(a,c){if("all"===c)return!0;for(var e=c.split(","),d=e.length,g;d--;)if(g=e[d].split("-"),2===g.length&&a>=parseInt(g[0],
10)&&a<=parseInt(g[1],10)||1===g.length&&parseInt(e[d],10)===a)return!0;return!1},_getRulesForDate:function(a){var c=a.getFullYear(),e=a.getMonth(),d=a.getDate();a=a.getDay();var g=this._rules,h=[],l,k,m,n;for(l in g)if(this._isNumInList(c,l))if(B.isString(g[l]))h.push(g[l]);else for(k in g[l])if(this._isNumInList(e,k))if(B.isString(g[l][k]))h.push(g[l][k]);else for(m in g[l][k])if(this._isNumInList(d,m))if(B.isString(g[l][k][m]))h.push(g[l][k][m]);else for(n in g[l][k][m])this._isNumInList(a,n)&&
B.isString(g[l][k][m][n])&&h.push(g[l][k][m][n]);return h},_matchesRule:function(a,c){return 0<=H(this._getRulesForDate(a),c)},_canBeSelected:function(a){var c=this.get("enabledDatesRule"),e=this.get("disabledDatesRule");return c?this._matchesRule(a,c):e?!this._matchesRule(a,e):!0},selectDates:function(a){u.isValidDate(a)?this._addDateToSelection(a):B.isArray(a)&&this._addDatesToSelection(a);return this},deselectDates:function(a){a?u.isValidDate(a)?this._removeDateFromSelection(a):B.isArray(a)&&this._removeDatesFromSelection(a):
this._clearSelection();return this},_addDateToSelection:function(a,c){a=this._normalizeTime(a);if(this._canBeSelected(a)){var e=a.getFullYear(),d=a.getMonth(),g=a.getDate();C(this._selectedDates,e)?C(this._selectedDates[e],d)||(this._selectedDates[e][d]={}):(this._selectedDates[e]={},this._selectedDates[e][d]={});this._selectedDates[e][d][g]=a;this._selectedDates=O(this._selectedDates,[e,d,g],a);c||this._fireSelectionChange()}},_addDatesToSelection:function(a){F(a,this._addDateToSelection,this);this._fireSelectionChange()},
_addDateRangeToSelection:function(a,c){var e=6E4*(c.getTimezoneOffset()-a.getTimezoneOffset()),d=a.getTime(),g=c.getTime(),h;d>g?(h=d,d=g,g=h+e):g-=e;for(e=d;e<=g;e+=864E5)d=new Date(e),d.setHours(12),this._addDateToSelection(d,e);this._fireSelectionChange()},_removeDateFromSelection:function(a,c){var e=a.getFullYear(),d=a.getMonth(),g=a.getDate();C(this._selectedDates,e)&&(C(this._selectedDates[e],d)&&C(this._selectedDates[e][d],g))&&(delete this._selectedDates[e][d][g],c||this._fireSelectionChange())},
_removeDatesFromSelection:function(a){F(a,this._removeDateFromSelection,this);this._fireSelectionChange()},_removeDateRangeFromSelection:function(a,c){for(var e=a.getTime(),d=c.getTime();e<=d;e+=864E5)this._removeDateFromSelection(new Date(e),e);this._fireSelectionChange()},_clearSelection:function(a){this._selectedDates={};this.get("contentBox").all("."+E).removeClass(E).setAttribute("aria-selected",!1);a||this._fireSelectionChange()},_fireSelectionChange:function(){this.fire("selectionChange",{newSelection:this._getSelectedDatesList()})},
_restoreModifiedCells:function(){var a=this.get("contentBox"),c;for(c in this._storedDateCells)a.one("#"+c).replace(this._storedDateCells[c]),delete this._storedDateCells[c]},_renderCustomRules:function(){this.get("contentBox").all("."+w+",."+s).removeClass(I).setAttribute("aria-disabled",!1);if(!J(this._rules)){var a,e;for(a=0;a<this._paneNumber;a++)e=u.addMonths(this.get("date"),a),e=u.listOfDatesInMonth(e),F(e,c.bind(this._renderCustomRulesHelper,this))}},_renderCustomRulesHelper:function(a){var c=
this.get("enabledDatesRule"),e=this.get("disabledDatesRule"),d;d=this._getRulesForDate(a);0<d.length?((c&&0>H(d,c)||!c&&e&&0<=H(d,e))&&this._disableDate(a),B.isFunction(this._filterFunction)&&(c=this._dateToNode(a),this._storedDateCells[c.get("id")]=c.cloneNode(!0),this._filterFunction(a,c,d))):c&&this._disableDate(a)},_renderSelectedDates:function(){this.get("contentBox").all("."+E).removeClass(E).setAttribute("aria-selected",!1);var a,e;for(a=0;a<this._paneNumber;a++)e=u.addMonths(this.get("date"),
a),e=this._getSelectedDatesInMonth(e),F(e,c.bind(this._renderSelectedDatesHelper,this))},_renderSelectedDatesHelper:function(a){this._dateToNode(a).addClass(E).setAttribute("aria-selected",!0)},_disableDate:function(a){this._dateToNode(a).addClass(I).setAttribute("aria-disabled",!0)},_dateToNode:function(a){var c=a.getDate(),e=0,d=c%7;a=(12+a.getMonth()-this.get("date").getMonth())%12;var g=this._paneProperties[this._calendarId+"_pane_"+a].cutoffCol;switch(d){case 0:e=6<=g?12:5;break;case 1:e=6;break;
case 2:e=0<g?7:0;break;case 3:e=1<g?8:1;break;case 4:e=2<g?9:2;break;case 5:e=3<g?10:3;break;case 6:e=4<g?11:4}return this.get("contentBox").one("#"+this._calendarId+"_pane_"+a+"_"+e+"_"+c)},_nodeToDate:function(a){a=a.get("id").split("_").reverse();var c=parseInt(a[2],10);a=parseInt(a[0],10);var e=u.addMonths(this.get("date"),c),c=e.getFullYear(),e=e.getMonth();return new Date(c,e,a,12,0,0,0)},_bindCalendarEvents:function(){},_normalizeDate:function(a){return a?new Date(a.getFullYear(),a.getMonth(),
1,12,0,0,0):null},_normalizeTime:function(a){return a?new Date(a.getFullYear(),a.getMonth(),a.getDate(),12,0,0,0):null},_getCutoffColumn:function(a,c){return 6-(this._normalizeDate(a).getDay()-c+7)%7},_turnPrevMonthOn:function(a){var c=a.get("id"),e=u.daysInMonth(u.addMonths(this._paneProperties[c].paneDate,-1)),d;this._paneProperties[c].hasOwnProperty("daysInPrevMonth")||(this._paneProperties[c].daysInPrevMonth=0);if(e!==this._paneProperties[c].daysInPrevMonth){this._paneProperties[c].daysInPrevMonth=
e;for(d=5;0<=d;d--)a.one("#"+c+"_"+d+"_"+(d-5)).set("text",e--)}},_turnPrevMonthOff:function(a){var c=a.get("id"),e;this._paneProperties[c].daysInPrevMonth=0;for(e=5;0<=e;e--)a.one("#"+c+"_"+e+"_"+(e-5)).setContent("&nbsp;")},_cleanUpNextMonthCells:function(a){var c=a.get("id");a.one("#"+c+"_6_29").removeClass(s);a.one("#"+c+"_7_30").removeClass(s);a.one("#"+c+"_8_31").removeClass(s);a.one("#"+c+"_0_30").removeClass(s);a.one("#"+c+"_1_31").removeClass(s)},_turnNextMonthOn:function(a){var c=1,e=a.get("id"),
d=this._paneProperties[e].daysInMonth,g=this._paneProperties[e].cutoffCol,h;for(h=d-22;h<g+7;h++)a.one("#"+e+"_"+h+"_"+(h+23)).set("text",c++).addClass(s);h=g;for(31===d&&1>=g?h=2:30===d&&0===g&&(h=1);h<g+7;h++)a.one("#"+e+"_"+h+"_"+(h+30)).set("text",c++).addClass(s)},_turnNextMonthOff:function(a){var c=a.get("id"),e=this._paneProperties[c].daysInMonth,d=this._paneProperties[c].cutoffCol,g;for(g=e-22;12>=g;g++)a.one("#"+c+"_"+g+"_"+(g+23)).setContent("&nbsp;").addClass(s);g=0;for(31===e&&1>=d?g=
2:30===e&&0===d&&(g=1);12>=g;g++)a.one("#"+c+"_"+g+"_"+(g+30)).setContent("&nbsp;").addClass(s)},_afterShowNextMonthChange:function(){var a=this.get("contentBox").one("#"+this._calendarId+"_pane_"+(this._paneNumber-1));this._cleanUpNextMonthCells(a);this.get("showNextMonth")?this._turnNextMonthOn(a):this._turnNextMonthOff(a)},_afterShowPrevMonthChange:function(){var a=this.get("contentBox").one("#"+this._calendarId+"_pane_0");this.get("showPrevMonth")?this._turnPrevMonthOn(a):this._turnPrevMonthOff(a)},
_afterHeaderRendererChange:function(){this.get("contentBox").one("."+t).setContent(this._updateCalendarHeader(this.get("date")))},_afterCustomRendererChange:function(){this._restoreModifiedCells();this._renderCustomRules()},_afterDateChange:function(){var a=this.get("contentBox"),c=a.one("."+z).one("."+t),e=a.all("."+m),d=this.get("date"),g=0;a.setStyle("visibility","hidden");c.setContent(this._updateCalendarHeader(d));this._restoreModifiedCells();e.each(function(a){this._rerenderCalendarPane(u.addMonths(d,
g++),a)},this);this._afterShowPrevMonthChange();this._afterShowNextMonthChange();this._renderCustomRules();this._renderSelectedDates();a.setStyle("visibility","inherit")},_initCalendarPane:function(a,e){var h=this.get("strings.very_short_weekdays")||"Su Mo Tu We Th Fr Sa".split(" "),m=c.Intl.get("datatype-date-format").A,g=this.get("strings.first_weekday")||0,n=this._getCutoffColumn(a,g),l=u.daysInMonth(a),k="     ".split(" "),r={},p,v,q;r.weekday_row="";for(p=g;p<=g+6;p++)r.weekday_row+=y(d.WEEKDAY_TEMPLATE,
{short_weekdayname:h[p%7],weekdayname:m[p%7]});r.weekday_row_template=y(d.WEEKDAY_ROW_TEMPLATE,r);for(h=0;5>=h;h++)for(m=0;12>=m;m++){g=7*h-5+m;p=e+"_"+m+"_"+g;v=w;1>g?v=L:g>l&&(v=s);if(1>g||g>l)g="&nbsp;";q=m>=n&&m<n+7?"":A;k[h]+=y(d.CALDAY_TEMPLATE,{day_content:g,calendar_col_class:"calendar_col"+m,calendar_col_visibility_class:q,calendar_day_class:v,calendar_day_id:p})}r.body_template="";F(k,function(a){r.body_template+=y(d.CALDAY_ROW_TEMPLATE,{calday_row:a})});r.calendar_pane_id=e;r.calendar_pane_tabindex=
this.get("tabIndex");r.pane_arialabel=u.format(a,{format:"%B %Y"});k=y(y(d.CALENDAR_GRID_TEMPLATE,r),d.CALENDAR_STRINGS);this._paneProperties[e]={cutoffCol:n,daysInMonth:l,paneDate:a};return k},_rerenderCalendarPane:function(a,c){var e=this.get("strings.first_weekday")||0,e=this._getCutoffColumn(a,e),d=u.daysInMonth(a),h=c.get("id"),m,l;c.setStyle("visibility","hidden");c.setAttribute("aria-label",u.format(a,{format:"%B %Y"}));for(m=0;12>=m;m++)if(l=c.all(".calendar_col"+m),l.removeClass(A),m<e||
m>=e+7)l.addClass(A);else switch(m){case 0:l=c.one("#"+h+"_0_30");30<=d?(l.set("text","30"),l.removeClass(s).addClass(w)):(l.setContent("&nbsp;"),l.removeClass(w).addClass(s));break;case 1:l=c.one("#"+h+"_1_31");31<=d?(l.set("text","31"),l.removeClass(s).addClass(w)):(l.setContent("&nbsp;"),l.removeClass(w).addClass(s));break;case 6:l=c.one("#"+h+"_6_29");29<=d?(l.set("text","29"),l.removeClass(s).addClass(w)):(l.setContent("&nbsp;"),l.removeClass(w).addClass(s));break;case 7:l=c.one("#"+h+"_7_30");
30<=d?(l.set("text","30"),l.removeClass(s).addClass(w)):(l.setContent("&nbsp;"),l.removeClass(w).addClass(s));break;case 8:l=c.one("#"+h+"_8_31"),31<=d?(l.set("text","31"),l.removeClass(s).addClass(w)):(l.setContent("&nbsp;"),l.removeClass(w).addClass(s))}this._paneProperties[h].cutoffCol=e;this._paneProperties[h].daysInMonth=d;this._paneProperties[h].paneDate=a;c.setStyle("visibility","inherit")},_updateCalendarHeader:function(a){var e="",d=this.get("headerRenderer");c.Lang.isString(d)?e=u.format(a,
{format:d}):d instanceof Function&&(e=d.call(this,a));return e},_initCalendarHeader:function(a){return y(y(d.HEADER_TEMPLATE,{calheader:this._updateCalendarHeader(a),calendar_id:this._calendarId}),d.CALENDAR_STRINGS)},_initCalendarHTML:function(a){var e={},h=0,m,g;e.header_template=this._initCalendarHeader(a);e.calendar_id=this._calendarId;e.body_template=y(y(d.CONTENT_TEMPLATE,e),d.CALENDAR_STRINGS);g=e.body_template.replace(/\{calendar_grid_template\}/g,c.bind(function(){m=this._initCalendarPane(u.addMonths(a,
h),e.calendar_id+"_pane_"+h);h++;return m},this));this._paneNumber=h;return g}},{CALENDAR_STRINGS:{calendar_grid_class:m,calendar_body_class:D,calendar_hd_class:z,calendar_hd_label_class:t,calendar_weekdayrow_class:n,calendar_weekday_class:h,calendar_row_class:K,calendar_day_class:w,calendar_dayanchor_class:M,calendar_pane_class:N,calendar_right_grid_class:v,calendar_left_grid_class:e,calendar_status_class:a},CONTENT_TEMPLATE:'<div class="yui3-g {calendar_pane_class}" id="{calendar_id}">{header_template}<div class="yui3-u-1">{calendar_grid_template}</div></div>',
ONE_PANE_TEMPLATE:'<div class="yui3-g {calendar_pane_class}" id="{calendar_id}">{header_template}<div class="yui3-u-1">{calendar_grid_template}</div></div>',TWO_PANE_TEMPLATE:'<div class="yui3-g {calendar_pane_class}" id="{calendar_id}">{header_template}<div class="yui3-u-1-2"><div class = "{calendar_left_grid_class}">{calendar_grid_template}</div></div><div class="yui3-u-1-2"><div class = "{calendar_right_grid_class}">{calendar_grid_template}</div></div></div>',THREE_PANE_TEMPLATE:'<div class="yui3-g {calendar_pane_class}" id="{calendar_id}">{header_template}<div class="yui3-u-1-3"><div class="{calendar_left_grid_class}">{calendar_grid_template}</div></div><div class="yui3-u-1-3">{calendar_grid_template}</div><div class="yui3-u-1-3"><div class="{calendar_right_grid_class}">{calendar_grid_template}</div></div></div>',
CALENDAR_GRID_TEMPLATE:'<table class="{calendar_grid_class}" id="{calendar_pane_id}" role="grid" aria-readonly="true" aria-label="{pane_arialabel}" tabindex="{calendar_pane_tabindex}"><thead>{weekday_row_template}</thead><tbody>{body_template}</tbody></table>',HEADER_TEMPLATE:'<div class="yui3-g {calendar_hd_class}"><div class="yui3-u {calendar_hd_label_class}" id="{calendar_id}_header" aria-role="heading">{calheader}</div></div>',WEEKDAY_ROW_TEMPLATE:'<tr class="{calendar_weekdayrow_class}" role="row">{weekday_row}</tr>',
CALDAY_ROW_TEMPLATE:'<tr class="{calendar_row_class}" role="row">{calday_row}</tr>',WEEKDAY_TEMPLATE:'<th class="{calendar_weekday_class}" role="columnheader" aria-label="{weekdayname}">{short_weekdayname}</th>',CALDAY_TEMPLATE:'<td class="{calendar_col_class} {calendar_day_class} {calendar_col_visibility_class}" id="{calendar_day_id}" role="gridcell" tabindex="-1">{day_content}</td>',NAME:"calendarBase",ATTRS:{tabIndex:{value:1},date:{value:new Date,setter:function(a){a=this._normalizeDate(a);return u.areEqual(a,
this.get("date"))?this.get("date"):a}},showPrevMonth:{value:!1},showNextMonth:{value:!1},strings:{valueFn:function(){return c.Intl.get("calendar-base")}},headerRenderer:{value:"%B %Y"},enabledDatesRule:{value:null},disabledDatesRule:{value:null},selectedDates:{readOnly:!0,getter:function(){return this._getSelectedDatesList()}},customRenderer:{lazyAdd:!1,value:{},setter:function(a){this._rules=a.rules;this._filterFunction=a.filterFunction}}}})},"3.17.2",{requires:["widget","datatype-date","datatype-date-math",
"cssgrids"],lang:"de en es es-AR fr hu it ja nb-NO nl pt-BR ru zh-Hans zh-Hans-CN zh-Hant zh-Hant-HK zh-HANT-TW".split(" "),skinnable:!0});
YUI.add("calendarnavigator",function(c,q){function d(){d.superclass.constructor.apply(this,arguments)}var a=c.ClassNameManager.getClassName,m=c.Lang.sub,e=c.Node.create,v=a("calendar","header"),D=a("calendarnav","prevmonth"),z=a("calendarnav","nextmonth"),t=a("calendarnav","month-disabled"),n=c.DataType.Date;d.NS="navigator";d.NAME="pluginCalendarNavigator";d.ATTRS={shiftByMonths:{value:1}};d.CALENDARNAV_STRINGS={prev_month_class:D,next_month_class:z};d.PREV_MONTH_CONTROL_TEMPLATE='<a class="yui3-u {prev_month_class}" role="button" aria-label="{prev_month_arialabel}" tabindex="{control_tabindex}" />';
d.NEXT_MONTH_CONTROL_TEMPLATE='<a class="yui3-u {next_month_class}" role="button" aria-label="{next_month_arialabel}" tabindex="{control_tabindex}" />';c.extend(d,c.Plugin.Base,{_eventAttachments:{},_controls:{},initializer:function(){this._controls={};this._eventAttachments={};this.afterHostMethod("renderUI",this._initNavigationControls)},destructor:function(){},_focusNavigation:function(a){a.currentTarget.focus()},_subtractMonths:function(a){if("click"===a.type||"keydown"===a.type&&(13===a.keyCode||
32===a.keyCode)){var c=this.get("host"),e=c.get("date");c.set("date",n.addMonths(e,-1*this.get("shiftByMonths")));a.preventDefault()}},_addMonths:function(a){if("click"===a.type||"keydown"===a.type&&(13===a.keyCode||32===a.keyCode)){var c=this.get("host"),e=c.get("date");c.set("date",n.addMonths(e,this.get("shiftByMonths")));a.preventDefault()}},_updateControlState:function(){var a=this.get("host"),c=a.get("date"),e=n.addMonths(c,a._paneNumber-1),d=a._normalizeDate(a.get("minimumDate")),a=a._normalizeDate(a.get("maximumDate"));
n.areEqual(d,c)?(this._eventAttachments.prevMonth&&(this._eventAttachments.prevMonth.detach(),this._eventAttachments.prevMonth=!1),this._controls.prevMonth.hasClass(t)||this._controls.prevMonth.addClass(t).setAttribute("aria-disabled","true")):(this._eventAttachments.prevMonth||(this._eventAttachments.prevMonth=this._controls.prevMonth.on(["click","keydown"],this._subtractMonths,this)),this._controls.prevMonth.hasClass(t)&&this._controls.prevMonth.removeClass(t).setAttribute("aria-disabled","false"));
n.areEqual(a,e)?(this._eventAttachments.nextMonth&&(this._eventAttachments.nextMonth.detach(),this._eventAttachments.nextMonth=!1),this._controls.nextMonth.hasClass(t)||this._controls.nextMonth.addClass(t).setAttribute("aria-disabled","true")):(this._eventAttachments.nextMonth||(this._eventAttachments.nextMonth=this._controls.nextMonth.on(["click","keydown"],this._addMonths,this)),this._controls.nextMonth.hasClass(t)&&this._controls.nextMonth.removeClass(t).setAttribute("aria-disabled","false"));
this._controls.prevMonth.on(["click","keydown"],this._focusNavigation,this);this._controls.nextMonth.on(["click","keydown"],this._focusNavigation,this)},_renderPrevControls:function(){var a=e(m(d.PREV_MONTH_CONTROL_TEMPLATE,d.CALENDARNAV_STRINGS));a.on("selectstart",this.get("host")._preventSelectionStart);return a},_renderNextControls:function(){var a=e(m(d.NEXT_MONTH_CONTROL_TEMPLATE,d.CALENDARNAV_STRINGS));a.on("selectstart",this.get("host")._preventSelectionStart);return a},_initNavigationControls:function(){var a=
this.get("host"),c=a.get("contentBox").one("."+v);d.CALENDARNAV_STRINGS.control_tabindex=a.get("tabIndex");d.CALENDARNAV_STRINGS.prev_month_arialabel="Go to previous month";d.CALENDARNAV_STRINGS.next_month_arialabel="Go to next month";this._controls.prevMonth=this._renderPrevControls();this._controls.nextMonth=this._renderNextControls();this._updateControlState();a.after(["dateChange","minimumDateChange","maximumDateChange"],this._updateControlState,this);c.prepend(this._controls.prevMonth);c.append(this._controls.nextMonth)}});
c.namespace("Plugin").CalendarNavigator=d},"3.17.2",{requires:["plugin","classnamemanager","datatype-date","node"],skinnable:!0});
YUI.add("squarespace-calendar-day-template",function(c){var q=c.Handlebars;(function(){var c=q.template;(q.templates=q.templates||{})["calendar-day.html"]=c(function(a,c,e,d,q){function z(a,c){return""}function t(a,c){var d,b,f;d='\n\t<div class="background';if((f=e["if"].call(a,(b=(b=(b=a.events,null==b||!1===b?b:b[0]),null==b||!1===b?b:b.structuredContent),null==b||!1===b?b:b.startDate),{hash:{},inverse:k.noop,fn:k.program(5,n,c),data:c}))||0===f)d+=f;return d+='">\n\t\t<a href="'+p((b=(b=(b=a.events,
null==b||!1===b?b:b[0]),null==b||!1===b?b:b.fullUrl),typeof b===r?b.apply(a):b))+'" class="background-image-link"><img data-src="'+p((b=(b=(b=a.events,null==b||!1===b?b:b[0]),null==b||!1===b?b:b.assetUrl),typeof b===r?b.apply(a):b))+'" data-image-dimensions="'+p((b=(b=(b=a.events,null==b||!1===b?b:b[0]),null==b||!1===b?b:b.originalSize),typeof b===r?b.apply(a):b))+'" data-load="false" class="background-image"></a>\n\t</div>\n\t'}function n(a,c){return" background--iseventscollection"}function h(a,
c){return" itemlist--iseventscollection"}function A(a,c){var d,b,f;d='\n\t<li class="item';if((b=e["if"].call(a,a.isMultiday,{hash:{},inverse:k.noop,fn:k.program(11,E,c),data:c}))||0===b)d+=b;if((b=e["if"].call(a,a.isSubsequentDayOfMultidayEvent,{hash:{},inverse:k.noop,fn:k.program(13,I,c),data:c}))||0===b)d+=b;d+='">\n\t\t<a href="';(b=e.fullUrl)?b=b.call(a,{hash:{},data:c}):(b=a.fullUrl,b=typeof b===r?b.apply(a):b);d+=p(b)+'" class="item-link">\n\t\t\t<span class="item-time item-time--12hr">';f=
{hash:{},data:c};d+=p((b=e["calendar-compact-time-format"]||a["calendar-compact-time-format"],b?b.call(a,(b=a.structuredContent,null==b||!1===b?b:b.startDate),f):x.call(a,"calendar-compact-time-format",(b=a.structuredContent,null==b||!1===b?b:b.startDate),f)))+'&nbsp;</span>\n\t\t\t<span class="item-time item-time--24hr">';f={hash:{format:"%H:%M"},data:c};d+=p((b=e["date-format"]||a["date-format"],b?b.call(a,(b=a.structuredContent,null==b||!1===b?b:b.startDate),f):x.call(a,"date-format",(b=a.structuredContent,
null==b||!1===b?b:b.startDate),f)))+'&nbsp;</span>\n\t\t\t<span class="item-title">';(b=e.title)?b=b.call(a,{hash:{},data:c}):(b=a.title,b=typeof b===r?b.apply(a):b);d+=p(b)+"</span>\n\t\t\t";if((b=e["if"].call(a,a.isMultiday,{hash:{},inverse:k.noop,fn:k.program(15,K,c),data:c}))||0===b)d+=b;return d+"\n\t\t</a>\n\t</li>\n\t"}function E(a,c){return" item--multiday"}function I(a,c){return" item--ongoing"}function K(a,c){var d,b;d={hash:{format:"%b %e"},data:c};return d='<span class="item-enddate">&nbsp;'+
(p((b=e["date-format"]||a["date-format"],b?b.call(a,(b=a.structuredContent,null==b||!1===b?b:b.endDate),d):x.call(a,"date-format",(b=a.structuredContent,null==b||!1===b?b:b.endDate),d)))+"</span>")}function w(a,c){return" flyoutitemlist--iseventscollection"}function L(a,c){return" \n\t\tflyoutitemlist--hasmorecontent\n\t"}function s(a,c){var d,b,f;d="\n\t\t";f={hash:{},inverse:k.noop,fn:k.program(22,M,c),data:c};(b=e.events)?b=b.call(a,f):(b=a.events,b=typeof b===r?b.apply(a):b);e.events||(b=P.call(a,
b,f));if(b||0===b)d+=b;return d+"\n\t"}function M(a,c){var d,b;d="\n\t\t\t";if((b=e["if"].call(a,a.excerpt,{hash:{},inverse:k.program(25,B,c),fn:k.program(23,N,c),data:c}))||0===b)d+=b;return d+"\n\t\t"}function N(a,c){return" \n\t\t\t\tflyoutitemlist--hasmorecontent\n\t\t\t"}function B(a,c){var d,b,f;d="\n\t\t\t\t";if((f=e["if"].call(a,(b=a.location,null==b||!1===b?b:b.addressLine1),{hash:{},inverse:k.noop,fn:k.program(26,y,c),data:c}))||0===f)d+=f;return d+"\n\t\t\t"}function y(a,c){return" \n\t\t\t\t\tflyoutitemlist--hasmorecontent\n\t\t\t\t"}
function F(a,c){var d,b,f;d='\n\t<li class="flyoutitem';if((b=e["if"].call(a,a.isMultiday,{hash:{},inverse:k.noop,fn:k.program(29,G,c),data:c}))||0===b)d+=b;if((b=e["if"].call(a,a.isSubsequentDayOfMultidayEvent,{hash:{},inverse:k.noop,fn:k.program(31,H,c),data:c}))||0===b)d+=b;d+='">\n\t\t<h1 class="flyoutitem-title"><a href="';(b=e.fullUrl)?b=b.call(a,{hash:{},data:c}):(b=a.fullUrl,b=typeof b===r?b.apply(a):b);d+=p(b)+'" class="flyoutitem-link">';(b=e.title)?b=b.call(a,{hash:{},data:c}):(b=a.title,
b=typeof b===r?b.apply(a):b);d+=p(b);if((b=e["if"].call(a,a.isMultiday,{hash:{},inverse:k.noop,fn:k.program(33,C,c),data:c}))||0===b)d+=b;d+='&nbsp;<span class="flyoutitem-link-arrow"></span></a></h1>\n\t\t<div class="flyoutitem-datetime flyoutitem-datetime--12hr">\n\t\t\t';if((b=e["if"].call(a,a.isMultiday,{hash:{},inverse:k.program(37,J,c),fn:k.program(35,O,c),data:c}))||0===b)d+=b;d+='\n\t\t</div>\n\t\t<div class="flyoutitem-datetime flyoutitem-datetime--24hr">\n\t\t\t';if((b=e["if"].call(a,a.isMultiday,
{hash:{},inverse:k.program(41,Q,c),fn:k.program(39,u,c),data:c}))||0===b)d+=b;d+='\n\t\t</div>\n\t\t<div class="flyoutitem-location">\n\t\t\t';if((f=e["if"].call(a,(b=a.location,null==b||!1===b?b:b.addressTitle),{hash:{},inverse:k.noop,fn:k.program(43,R,c),data:c}))||0===f)d+=f;d+="\n\t\t\t";if((f=e["if"].call(a,(b=a.location,null==b||!1===b?b:b.addressLine1),{hash:{},inverse:k.noop,fn:k.program(45,S,c),data:c}))||0===f)d+=f;d+="\n\t\t\t";if((f=e["if"].call(a,(b=a.location,null==b||!1===b?b:b.addressLine2),
{hash:{},inverse:k.noop,fn:k.program(47,T,c),data:c}))||0===f)d+=f;d+="\n\t\t\t";if((f=e["if"].call(a,(b=a.location,null==b||!1===b?b:b.addressCountry),{hash:{},inverse:k.noop,fn:k.program(49,g,c),data:c}))||0===f)d+=f;d+="\n\t\t</div>\n\t\t";if((f=e["if"].call(a,a.excerpt,{hash:{},inverse:k.noop,fn:k.program(51,U,c),data:c}))||0===f)d+=f;return d+"\n\t</li>\n\t"}function G(a,c){return" flyoutitem--multiday"}function H(a,c){return" flyoutitem--ongoing"}function C(a,c){var d,b;d={hash:{format:"%b %e"},
data:c};return d=' <span class="flyoutitem-enddate">'+(p((b=e["date-format"]||a["date-format"],b?b.call(a,(b=a.structuredContent,null==b||!1===b?b:b.endDate),d):x.call(a,"date-format",(b=a.structuredContent,null==b||!1===b?b:b.endDate),d)))+"</span>")}function O(a,c){var d,b,f;f={hash:{format:"%a, %b %e, %l:%M%P"},data:c};d="\n\t\t\t\t"+(p((b=e["date-format"]||a["date-format"],b?b.call(a,(b=a.structuredContent,null==b||!1===b?b:b.startDate),f):x.call(a,"date-format",(b=a.structuredContent,null==b||
!1===b?b:b.startDate),f)))+" &ndash; ");f={hash:{format:"%a, %b %e, %l:%M%P"},data:c};return d+=p((b=e["date-format"]||a["date-format"],b?b.call(a,(b=a.structuredContent,null==b||!1===b?b:b.endDate),f):x.call(a,"date-format",(b=a.structuredContent,null==b||!1===b?b:b.endDate),f)))+"\n\t\t\t"}function J(a,c){var d,b,f;f={hash:{format:"%l:%M%P"},data:c};d="\n\t\t\t\t"+(p((b=e["date-format"]||a["date-format"],b?b.call(a,(b=a.structuredContent,null==b||!1===b?b:b.startDate),f):x.call(a,"date-format",
(b=a.structuredContent,null==b||!1===b?b:b.startDate),f)))+" &ndash; ");f={hash:{format:"%l:%M%P"},data:c};return d+=p((b=e["date-format"]||a["date-format"],b?b.call(a,(b=a.structuredContent,null==b||!1===b?b:b.endDate),f):x.call(a,"date-format",(b=a.structuredContent,null==b||!1===b?b:b.endDate),f)))+"\n\t\t\t"}function u(a,c){var d,b,f;f={hash:{format:"%a, %b %e, %H:%M"},data:c};d="\n\t\t\t\t"+(p((b=e["date-format"]||a["date-format"],b?b.call(a,(b=a.structuredContent,null==b||!1===b?b:b.startDate),
f):x.call(a,"date-format",(b=a.structuredContent,null==b||!1===b?b:b.startDate),f)))+" &ndash; ");f={hash:{format:"%a, %b %e, %H:%M"},data:c};return d+=p((b=e["date-format"]||a["date-format"],b?b.call(a,(b=a.structuredContent,null==b||!1===b?b:b.endDate),f):x.call(a,"date-format",(b=a.structuredContent,null==b||!1===b?b:b.endDate),f)))+"\n\t\t\t"}function Q(a,c){var d,b,f;f={hash:{format:"%H:%M"},data:c};d="\n\t\t\t\t"+(p((b=e["date-format"]||a["date-format"],b?b.call(a,(b=a.structuredContent,null==
b||!1===b?b:b.startDate),f):x.call(a,"date-format",(b=a.structuredContent,null==b||!1===b?b:b.startDate),f)))+" &ndash; ");f={hash:{format:"%H:%M"},data:c};return d+=p((b=e["date-format"]||a["date-format"],b?b.call(a,(b=a.structuredContent,null==b||!1===b?b:b.endDate),f):x.call(a,"date-format",(b=a.structuredContent,null==b||!1===b?b:b.endDate),f)))+"\n\t\t\t"}function R(a,c){var d,b;return d=""+('<div class="flyoutitem-location-addresstitle">'+p((b=(b=a.location,null==b||!1===b?b:b.addressTitle),
typeof b===r?b.apply(a):b))+"</div>")}function S(a,c){var d,b;return d=""+('<div class="flyoutitem-location-address1">'+p((b=(b=a.location,null==b||!1===b?b:b.addressLine1),typeof b===r?b.apply(a):b))+"</div>")}function T(a,c){var d,b;return d=""+('<div class="flyoutitem-location-address2">'+p((b=(b=a.location,null==b||!1===b?b:b.addressLine2),typeof b===r?b.apply(a):b))+"</div>")}function g(a,c){var d,b;return d=""+('<div class="flyoutitem-location-addresscountry">'+p((b=(b=a.location,null==b||!1===
b?b:b.addressCountry),typeof b===r?b.apply(a):b))+"</div>")}function U(a,c){var d,b;d='<div class="flyoutitem-excerpt">';(b=e.excerpt)?b=b.call(a,{hash:{},data:c}):(b=a.excerpt,b=typeof b===r?b.apply(a):b);if(b||0===b)d+=b;return d+"</div>"}this.compilerInfo=[4,">= 1.0.0"];e=this.merge(e,a.helpers);q=q||{};a="";var l,k=this,r="function",p=this.escapeExpression,x=e.helperMissing,P=e.blockHelperMissing;if((d=e["if"].call(c,(l=(l=c.events,null==l||!1===l?l:l[0]),null==l||!1===l?l:l.systemDataId),{hash:{},
inverse:k.noop,fn:k.program(1,function(a,c){var d,b,f;d="\n\t";if((f=e["if"].call(a,(b=(b=a.events,null==b||!1===b?b:b[1]),null==b||!1===b?b:b.title),{hash:{},inverse:k.program(4,t,c),fn:k.program(2,z,c),data:c}))||0===f)d+=f;return d+"\n"},q),data:q}))||0===d)a+=d;d={hash:{format:"%a"},data:q};a=a+'\n\n<div class="marker">\n\t<div class="marker-dayname">'+(p((l=e["day-of-month-format"]||c["day-of-month-format"],l?l.call(c,c.date,d):x.call(c,"day-of-month-format",c.date,d)))+'</div>\n\t<div class="marker-daynum">');
d={hash:{format:"%e"},data:q};a+=p((l=e["day-of-month-format"]||c["day-of-month-format"],l?l.call(c,c.date,d):x.call(c,"day-of-month-format",c.date,d)))+"</div>\n</div>\n\n";if((d=e["if"].call(c,c.events,{hash:{},inverse:k.noop,fn:k.program(7,function(a,c){var d,b,f,g;d='\n<ul class="itemlist';if((f=e["if"].call(a,(b=(b=(b=a.events,null==b||!1===b?b:b[0]),null==b||!1===b?b:b.structuredContent),null==b||!1===b?b:b.startDate),{hash:{},inverse:k.noop,fn:k.program(8,h,c),data:c}))||0===f)d+=f;d+='">\n\t';
g={hash:{},inverse:k.noop,fn:k.program(10,A,c),data:c};(f=e.events)?f=f.call(a,g):(f=a.events,f=typeof f===r?f.apply(a):f);e.events||(f=P.call(a,f,g));if(f||0===f)d+=f;d+='\n</ul>\n\n<ul class="\n\tflyoutitemlist\n\t';if((f=e["if"].call(a,(b=(b=(b=a.events,null==b||!1===b?b:b[0]),null==b||!1===b?b:b.structuredContent),null==b||!1===b?b:b.startDate),{hash:{},inverse:k.noop,fn:k.program(17,w,c),data:c}))||0===f)d+=f;d+="\n\t";if((f=e["if"].call(a,(b=(b=a.events,null==b||!1===b?b:b[1]),null==b||!1===
b?b:b.title),{hash:{},inverse:k.program(21,s,c),fn:k.program(19,L,c),data:c}))||0===f)d+=f;d+='\n">\n\t';g={hash:{},inverse:k.noop,fn:k.program(28,F,c),data:c};(f=e.events)?f=f.call(a,g):(f=a.events,f=typeof f===r?f.apply(a):f);e.events||(f=P.call(a,f,g));if(f||0===f)d+=f;return d+='\n</ul>\n\n<div class="itemcount">'+p((b=(b=a.events,null==b||!1===b?b:b.length),typeof b===r?b.apply(a):b))+"</div>\n"},q),data:q}))||0===d)a+=d;return a+="\n"})})();c.Handlebars.registerPartial("calendar-day.html".replace("/",
"."),q.templates["calendar-day.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-widgets-alert",function(c){c.namespace("Squarespace.Widgets");c.Squarespace.Widgets.Alert=c.Base.create("alert",c.Squarespace.Widgets.Confirmation,[],{},{CSS_PREFIX:"sqs-widgets-confirmation",TYPE:c.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:c.Squarespace.Widgets.Confirmation.ANCHOR,ATTRS:{className:{value:"alert"},style:{value:c.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_ONLY},"strings.confirm":{value:"Okay"}}})},"1.0",{requires:["base","squarespace-widgets-confirmation"]});
